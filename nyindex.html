<!DOCTYPE html> <html lang="no"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Innenfor ‚Äì Sm√• gester. Stor inkludering.</title> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet"> <style> :root { --main-green: #3d5c4c; --main-green-dark: #2e463a; --main-green-light: #eaf0ec; --main-bg: #faf7ef; --card-bg: #fff; --accent: #e49b7a; --shadow: 0 4px 24px 0 rgba(61,92,76,0.10); } html, body { margin: 0; padding: 0; font-family: 'Inter', Arial, sans-serif; background: var(--main-bg); color: var(--main-green); } header { background: #fff; box-shadow: 0 1px 0 #ececec; padding: 0; position: sticky; top: 0; z-index: 10; } .nav { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; padding: 24px 40px; } .nav-left { display: flex; align-items: center; gap: 12px; } .nav-logo { font-size: 1.6rem; font-weight: 700; color: var(--main-green); display: flex; align-items: center; gap: 8px; } .nav-logo-icon { font-size: 1.7rem; display: flex; align-items: center; justify-content: center; width: 28px; height: 24px; overflow: visible; margin: 0 4px 0 0; } .nav-links { display: flex; align-items: center; gap: 18px; } .nav-link { color: var(--main-green); text-decoration: none; font-weight: 500; font-size: 1rem; transition: color 0.2s; } .nav-link:hover { color: var(--main-green-dark); } .nav-actions { display: flex; align-items: center; gap: 12px; } .btn-login { background: none; border: none; color: var(--main-green); font-size: 1rem; font-weight: 500; cursor: pointer; padding: 8px 16px; border-radius: 20px; transition: background 0.2s; } .btn-login:hover { background: var(--main-green-light); } .btn-main { background: var(--accent); color: #fff; border: none; font-size: 1rem; font-weight: 700; padding: 12px 32px; border-radius: 20px; cursor: pointer; transition: background 0.2s; box-shadow: 0 2px 8px rgba(61,92,76,0.08); } .btn-main:hover { background: #d17d54; } .btn-login-green { background: var(--main-green); color: #fff; border: none; font-size: 1rem; font-weight: 700; padding: 12px 32px; border-radius: 20px; cursor: pointer; transition: background 0.2s; box-shadow: 0 2px 8px rgba(61,92,76,0.08); } .btn-login-green:hover { background: var(--main-green-dark); } .hero-title { font-size: 3.8rem; font-weight: 900; margin-bottom: 36px; color: var(--main-green); line-height: 1.1; } .hero { text-align: center; padding: 80px 0 60px 0; } .hero-title { font-size: 3.2rem; font-weight: 900; margin-bottom: 36px; color: var(--main-green); line-height: 1.1; } .hero-desc { font-size: 1.18rem; color: #6b857a; margin-bottom: 40px; font-weight: 400; line-height: 1.7; } .hero-btns { display: flex; gap: 32px; justify-content: center; margin-top: 32px; margin-bottom: 32px; } .btn-hero-main { background: var(--main-green); color: #fff; border: none; font-size: 1.08rem; font-weight: 700; padding: 16px 40px; border-radius: 24px; cursor: pointer; transition: background 0.2s; box-shadow: 0 2px 8px rgba(61,92,76,0.08); } .btn-hero-main:hover { background: var(--main-green-dark); } .btn-hero-outline { background: #fff; color: var(--main-green); border: 2px solid var(--main-green); font-size: 1.08rem; font-weight: 700; padding: 16px 40px; border-radius: 24px; cursor: pointer; transition: background 0.2s, color 0.2s; } .btn-hero-outline:hover { background: var(--main-green-light); } .section { max-width: 1200px; margin: 0 auto; padding: 72px 0 0 0; } .section-title { text-align: center; font-size: 2.2rem; font-weight: 900; margin-bottom: 48px; color: var(--main-green); } .steps-grid { display: flex; gap: 48px; justify-content: center; flex-wrap: wrap; background: #f8f6f1; border-radius: 32px; padding: 48px 0; margin-bottom: 72px; } .step-card { background: #fff; border-radius: 24px; box-shadow: var(--shadow); padding: 40px 44px 32px 44px; min-width: 260px; max-width: 320px; text-align: center; display: flex; flex-direction: column; align-items: center; } .step-icon { background: #fbeee6; border-radius: 50%; width: 64px; height: 64px; display: flex; align-items: center; justify-content: center; font-size: 2.2rem; margin-bottom: 24px; color: #e49b7a; } .step-title { font-weight: 700; font-size: 1.18rem; margin-bottom: 12px; color: var(--main-green); } .step-desc { color: #6b857a; font-size: 1.01rem; } .holidays-section { max-width: 1200px; margin: 0 auto; padding: 0 0 72px 0; } .holidays-title { text-align: center; font-size: 2.2rem; font-weight: 900; margin-bottom: 48px; color: var(--main-green); } .holidays-grid { display: flex; gap: 32px; justify-content: center; flex-wrap: wrap; } .holiday-card { background: #fff; border-radius: 24px; box-shadow: var(--shadow); padding: 36px 40px 28px 40px; min-width: 180px; max-width: 220px; text-align: center; display: flex; flex-direction: column; align-items: center; } .holiday-icon { font-size: 2.2rem; margin-bottom: 16px; } .holiday-title { font-weight: 700; font-size: 1.13rem; margin-bottom: 8px; color: var(--main-green); } .holiday-desc { color: #6b857a; font-size: 1rem; } .cta-section { max-width: 1100px; margin: 0 auto 0 auto; padding: 0 0 72px 0; display: flex; justify-content: center; } .cta-box { background: var(--main-green); color: #fff; border-radius: 24px; box-shadow: 0 8px 32px 0 rgba(61,92,76,0.18); padding: 64px 32px 48px 32px; width: 100%; max-width: 900px; text-align: center; margin-top: 48px; } .cta-title { font-size: 2.2rem; font-weight: 900; margin-bottom: 24px; color: #fff; } .cta-desc { font-size: 1.13rem; margin-bottom: 32px; color: #eaf0ec; } .cta-btn { background: var(--accent); color: #fff; border: none; font-size: 1.08rem; font-weight: 700; padding: 16px 40px; border-radius: 24px; cursor: pointer; transition: background 0.2s; box-shadow: 0 2px 8px rgba(61,92,76,0.08); } .cta-btn:hover { background: #d17d54; } footer { background: var(--main-green); color: #fff; text-align: center; padding: 36px 0 18px 0; font-size: 1.1rem; margin-top: 0; } .footer-logo { font-size: 1.2rem; font-weight: 700; display: flex; align-items: center; gap: 8px; justify-content: center; margin-bottom: 8px; } .footer-logo-icon { font-size: 1.3rem; } @media (max-width: 900px) { .nav, .section, .holidays-section, .cta-section { padding-left: 10px; padding-right: 10px; } .steps-grid, .holidays-grid { flex-direction: column; align-items: center; } } @media (max-width: 600px) { .hero-title { font-size: 2rem; } .section-title, .holidays-title, .cta-title { font-size: 1.3rem; } .cta-box { padding: 32px 8px; } } #register-modal-bg { display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100vw; height: 100vh; background: var(--main-bg); /* Endret fra rgba til nettsidens bakgrunnsfarge */ backdrop-filter: blur(1.5px); } </style> </head> <body> <!-- Registreringsmodal --> <div id="register-modal-bg" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(61,92,76,0.10);backdrop-filter:blur(1.5px);"></div> <div id="register-modal" style="display:none;position:fixed;z-index:1001;top:0;left:0;width:100vw;height:100vh;align-items:center;justify-content:center;"> <div style="background:#fff;border-radius:20px;box-shadow:0 8px 32px 0 rgba(61,92,76,0.18);padding:36px 32px 28px 32px;max-width:370px;width:95vw;margin:auto;display:flex;flex-direction:column;align-items:center;position:relative;z-index:10;"> <div style="position:relative;width:100%;"> <button id="register-modal-close" aria-label="Lukk" style="position:absolute;top:-10px;right:-10px;background:#fff;border:2px solid #fbeee6;border-radius:50%;width:38px;height:38px;font-size:2rem;color:#3d5c4c;cursor:pointer;z-index:10;box-shadow:0 2px 8px rgba(61,92,76,0.10);">&times;</button> </div> <div id="register-form-wrap"> <div style="background:#f8f6f1;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;margin-bottom:18px;"> <svg width="36" height="36" viewBox="0 0 61 48" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M30.5 44s-18.5-14.6-18.5-26.4C12 8.6 19.2 1.5 30.5 10.5C41.8 1.5 49 8.6 49 17.6C49 29.4 30.5 44 30.5 44Z" fill="#3d5c4c"/> </svg> </div> <div style="font-size:2rem;font-weight:900;color:#3d5c4c;text-align:center;margin-bottom:4px;">Registrer deg</div> <div style="font-size:1.08rem;color:#3d5c4c;opacity:0.85;text-align:center;margin-bottom:22px;">Bli en del av Innenfor-fellesskapet</div> <form id="register-form" autocomplete="off" style="width:100%;display:flex;flex-direction:column;gap:14px;"> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">Jeg er <select id="reg-rolle" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;"> <option>Privatperson</option> <option>Bedrift</option> <option>Administrator</option> <option>B2B Owner</option> <option>B2B Staff</option> <option>Logistics Partner</option> <option>Support/Service</option> </select> </label> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">Navn <input id="reg-navn" type="text" placeholder="Ditt navn" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;" /> </label> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">E-post <input id="reg-epost" type="email" placeholder="din@epost.no" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;" /> </label> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">Passord <input id="reg-passord" type="password" placeholder="" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;" /> </label> <button type="submit" style="margin-top:10px;background:#3d5c4c;color:#fff;font-size:1.15rem;font-weight:700;padding:12px 0;border:none;border-radius:20px;cursor:pointer;">Registrer deg</button> </form> <div style="margin-top:18px;font-size:1rem;color:#3d5c4c;opacity:0.7;">Har du allerede konto? <a href="#" id="login-link" style="color:#e49b7a;font-weight:600;text-decoration:none;">Logg inn</a></div> </div> <div id="login-form-wrap" style="display:none;"> <div style="background:#f8f6f1;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;margin-bottom:18px;"> <svg width="36" height="36" viewBox="0 0 61 48" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M30.5 44s-18.5-14.6-18.5-26.4C12 8.6 19.2 1.5 30.5 10.5C41.8 1.5 49 8.6 49 17.6C49 29.4 30.5 44 30.5 44Z" fill="#3d5c4c"/> </svg> </div> <div style="font-size:2rem;font-weight:900;color:#3d5c4c;text-align:center;margin-bottom:4px;">Logg inn</div> <form id="login-form" autocomplete="off" style="width:100%;display:flex;flex-direction:column;gap:14px;"> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">E-post <input id="login-epost" type="email" placeholder="din@epost.no" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;" /> </label> <label style="font-size:1rem;color:#3d5c4c;font-weight:500;">Passord <input id="login-passord" type="password" placeholder="" style="width:100%;margin-top:4px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:6px;font-size:1rem;" /> </label> <button type="submit" style="margin-top:10px;background:#3d5c4c;color:#fff;font-size:1.15rem;font-weight:700;padding:12px 0;border:none;border-radius:20px;cursor:pointer;">Logg inn</button> </form> <div style="margin-top:18px;font-size:1rem;color:#3d5c4c;opacity:0.7;">Har du ikke konto? <a href="#" id="goto-register" style="color:#e49b7a;font-weight:600;text-decoration:none;">Registrer deg</a></div> </div> <div id="admin-dashboard" style="display:none;width:340px;max-width:100vw;"> <div id="privatperson-dashboard" style="display:none;width:340px;max-width:100vw;"> <div id="bedrift-dashboard" style="display:none;width:340px;max-width:100vw;"> <div style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--main-bg);z-index:9999;overflow:auto;display:flex;flex-direction:column;align-items:center;"> <div style="width:100%;background:#fff;box-shadow:0 1px 0 #ececec;padding:32px 0 18px 0;text-align:center;"> <span style="font-size:2.2rem;font-weight:900;color:var(--main-green);letter-spacing:1px;">Min side ‚Äì Bedrift</span> </div> <div style="max-width:500px;width:95vw;margin:32px auto 0 auto;background:#fff;border-radius:24px;box-shadow:var(--shadow);padding:32px 24px 24px 24px;"> <div style="margin-bottom:24px;text-align:center;"> <div id="bedrift-info" style="font-size:1.1rem;color:var(--main-green);margin-bottom:10px;"></div> <div id="bedrift-status" style="font-size:1.1rem;color:#e49b7a;margin-bottom:18px;"></div> </div> <div style="margin-bottom:28px;"> <div style="font-weight:700;margin-bottom:8px;">Send melding til administrator</div> <textarea id="bedrift-melding" rows="2" style="width:100%;border-radius:8px;border:1.5px solid #3d5c4c;padding:8px 10px;font-size:1rem;"></textarea> <button id="bedrift-send-melding" style="margin-top:8px;background:var(--main-green);color:#fff;font-weight:700;padding:8px 18px;border:none;border-radius:20px;cursor:pointer;">Send melding</button> <div id="bedrift-melding-status" style="margin-top:6px;font-size:0.98rem;color:#3d5c4c;"></div> </div> <div style="margin-bottom:18px;"> <div style="font-weight:700;margin-bottom:8px;">Send gave√∏nske</div> <input id="bedrift-gaveonske" type="text" placeholder="Hva √∏nsker du √• sende?" style="width:100%;margin-bottom:8px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:8px;font-size:1rem;" /> <select id="bedrift-hoytid" style="width:100%;margin-bottom:8px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:8px;font-size:1rem;"> <option value="Eid al-Fitr">Eid al-Fitr</option> <option value="Jul">Jul</option> <option value="Diwali">Diwali</option> <option value="Hanukkah">Hanukkah</option> <option value="Nowruz">Nowruz</option> <option value="P√•ske">P√•ske</option> </select> <button id="bedrift-send-gaveonske" style="background:var(--accent);color:#fff;font-weight:700;padding:8px 18px;border:none;border-radius:20px;cursor:pointer;">Send gave√∏nske</button> <div id="bedrift-gaveonske-status" style="margin-top:6px;font-size:0.98rem;color:#3d5c4c;"></div> </div> <button id="bedrift-logout" style="margin-top:18px;background:var(--main-green);color:#fff;font-weight:700;padding:8px 24px;border:none;border-radius:20px;cursor:pointer;">Logg ut</button> </div> </div> </div> <div style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--main-bg);z-index:9999;overflow:auto;display:flex;flex-direction:column;align-items:center;"> <div style="width:100%;background:#fff;box-shadow:0 1px 0 #ececec;padding:32px 0 18px 0;text-align:center;"> <span style="font-size:2.2rem;font-weight:900;color:var(--main-green);letter-spacing:1px;">Min side ‚Äì Privatperson</span> </div> <div style="max-width:500px;width:95vw;margin:32px auto 0 auto;background:#fff;border-radius:24px;box-shadow:var(--shadow);padding:32px 24px 24px 24px;"> <div style="margin-bottom:24px;text-align:center;"> <div id="privatperson-info" style="font-size:1.1rem;color:var(--main-green);margin-bottom:10px;"></div> <div id="privatperson-status" style="font-size:1.1rem;color:#e49b7a;margin-bottom:18px;"></div> </div> <div style="margin-bottom:28px;"> <div style="font-weight:700;margin-bottom:8px;">Send melding til administrator</div> <textarea id="privatperson-melding" rows="2" style="width:100%;border-radius:8px;border:1.5px solid #3d5c4c;padding:8px 10px;font-size:1rem;"></textarea> <button id="privatperson-send-melding" style="margin-top:8px;background:var(--main-green);color:#fff;font-weight:700;padding:8px 18px;border:none;border-radius:20px;cursor:pointer;">Send melding</button> <div id="privatperson-melding-status" style="margin-top:6px;font-size:0.98rem;color:#3d5c4c;"></div> </div> <div style="margin-bottom:18px;"> <div style="font-weight:700;margin-bottom:8px;">Send gave√∏nske</div> <input id="privatperson-gaveonske" type="text" placeholder="Hva √∏nsker du √• sende?" style="width:100%;margin-bottom:8px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:8px;font-size:1rem;" /> <select id="privatperson-hoytid" style="width:100%;margin-bottom:8px;padding:8px 10px;border:1.5px solid #3d5c4c;border-radius:8px;font-size:1rem;"> <option value="Eid al-Fitr">Eid al-Fitr</option> <option value="Jul">Jul</option> <option value="Diwali">Diwali</option> <option value="Hanukkah">Hanukkah</option> <option value="Nowruz">Nowruz</option> <option value="P√•ske">P√•ske</option> </select> <button id="privatperson-send-gaveonske" style="background:var(--accent);color:#fff;font-weight:700;padding:8px 18px;border:none;border-radius:20px;cursor:pointer;">Send gave√∏nske</button> <div id="privatperson-gaveonske-status" style="margin-top:6px;font-size:0.98rem;color:#3d5c4c;"></div> </div> <button id="privatperson-logout" style="margin-top:18px;background:var(--main-green);color:#fff;font-weight:700;padding:8px 24px;border:none;border-radius:20px;cursor:pointer;">Logg ut</button> </div> </div> </div> <div style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--main-bg);z-index:9999;overflow:auto;display:flex;flex-direction:column;align-items:center;"> <div style="width:100%;background:#fff;box-shadow:0 1px 0 #ececec;padding:32px 0 18px 0;text-align:center;"> <span style="font-size:2.5rem;font-weight:900;color:var(--main-green);letter-spacing:1px;">Administratorpanel</span> </div> <div style="max-width:1200px;width:95vw;margin:32px auto 0 auto;background:#fff;border-radius:24px;box-shadow:var(--shadow);padding:40px 32px 32px 32px;"> <div style="display:flex;flex-wrap:wrap;gap:24px;align-items:center;justify-content:space-between;margin-bottom:32px;"> <input id="admin-search" type="text" placeholder="S√∏k p√• navn eller e-post..." style="flex:1 1 300px;padding:10px 16px;border:1.5px solid var(--main-green);border-radius:8px;font-size:1.1rem;" /> <button id="admin-export" style="background:var(--accent);color:#fff;font-weight:700;padding:10px 24px;border:none;border-radius:20px;cursor:pointer;font-size:1.1rem;">Eksporter CSV</button> <button id="admin-logout" style="background:var(--main-green);color:#fff;font-weight:700;padding:10px 24px;border:none;border-radius:20px;cursor:pointer;font-size:1.1rem;">Logg ut</button> </div> <div style="margin-bottom:32px;display:flex;gap:32px;flex-wrap:wrap;"> <div style="background:var(--main-green-light);border-radius:16px;padding:18px 32px;min-width:180px;text-align:center;"> <div style="font-size:1.7rem;font-weight:900;color:var(--main-green);" id="admin-usercount">0</div> <div style="color:var(--main-green);font-size:1.1rem;">Antall brukere</div> </div> <div style="background:var(--main-green-light);border-radius:16px;padding:18px 32px;min-width:180px;text-align:center;"> <div style="font-size:1.7rem;font-weight:900;color:var(--main-green);" id="admin-admincount">0</div> <div style="color:var(--main-green);font-size:1.1rem;">Antall administratorer</div> </div> <div style="background:var(--main-green-light);border-radius:16px;padding:18px 32px;min-width:180px;text-align:center;"> <div style="font-size:1.7rem;font-weight:900;color:var(--main-green);" id="admin-kjopcount">0</div> <div style="color:var(--main-green);font-size:1.1rem;">Totalt kj√∏p</div> </div> </div> <table style="width:100%;border-collapse:collapse;background:#f8f6f1;border-radius:12px;overflow:hidden;"> <thead> <tr style="background:#eaf0ec;color:var(--main-green);font-weight:700;"> <th style="padding:10px 6px;">Navn</th> <th style="padding:10px 6px;">E-post</th> <th style="padding:10px 6px;">Rolle</th> <th style="padding:10px 6px;">Kj√∏p</th> </tr> </thead> <tbody id="admin-users-tbody"></tbody> </table> </div> </div> </div> </div> </div> <div id="main-content"> <header> <div class="nav"> <div class="nav-left"> <span class="nav-logo" style="display:inline-flex;align-items:center;gap:8px;"> <span class="nav-logo-icon"> <svg width="36" height="30" viewBox="0 0 61 48" fill="none" xmlns="http://www.w3.org/2000/svg" style="vertical-align:middle;display:block;"> <path d="M30.5 44s-18.5-14.6-18.5-26.4C12 8.6 19.2 1.5 30.5 10.5C41.8 1.5 49 8.6 49 17.6C49 29.4 30.5 44 30.5 44Z" fill="#3d5c4c"/> </svg> </span> <span>Innenfor</span> </span> </div> <div class="nav-links"> <button class="nav-btn" id="nav-login" style="background:#fff;color:#3d5c4c;font-size:1rem;font-weight:700;padding:12px 32px;border:2px solid #3d5c4c;border-radius:20px;cursor:pointer;margin-right:10px;">Logg inn</button> <button class="nav-btn" id="open-register-modal" style="background:#e49b7a;color:#fff;font-size:1rem;font-weight:700;padding:12px 32px;border:none;border-radius:20px;cursor:pointer;">Registrer deg n√•</button> </div> </div> </header> <section class="hero"> <div class="hero-title" style="margin-bottom:44px;"> Sm√• gester.<br> <span style="display:inline-block;margin-top:18px;">Stor inkludering.</span> </div> <div class="hero-desc" style="margin-bottom:32px;"> Feir alle h√∏ytider, ikke bare de tradisjonelle.<br> <span style="display:inline-block;margin-top:12px;">Vi hjelper bedrifter og privatpersoner med √• vise omtanke gjennom kulturelt relevante gaver.</span> </div> <div class="hero-btns" style="display:flex;gap:32px;justify-content:center;margin-top:32px;margin-bottom:32px;"> <button class="hero-b2b-btn" style="background:#3d5c4c;color:#fff;font-size:1.15rem;font-weight:700;padding:16px 40px;border:none;border-radius:24px;cursor:pointer;">For bedrifter</button> <button class="hero-b2c-btn" style="background:#fff;color:#3d5c4c;font-size:1.15rem;font-weight:700;padding:16px 40px;border:2px solid #3d5c4c;border-radius:24px;cursor:pointer;">For privatpersoner</button> </div> </section> <!-- Fjernet: Offentlig info om B2C User, Logistics Partner og Support/Service. Funksjoner kun tilgjengelig i dashboard etter innlogging. --> <!-- Slik fungerer det --> <section class="section"> <div class="section-title">Slik fungerer det</div> <div style="height:32px;"></div> <div class="steps-grid" style="background:#fff;box-shadow:0 4px 24px 0 rgba(61,92,76,0.10);border-radius:32px;padding:48px 0 48px 0;"> <div class="step-card"> <div class="step-icon" style="margin-bottom:28px;background:#f8f6f1;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;"> <!-- Person ikon fra bruker --> <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="18" cy="11" r="5" stroke="#d28c77" stroke-width="2.2"/> <path d="M29 28c0-4.4-4.9-8-11-8s-11 3.6-11 8" stroke="#d28c77" stroke-width="2.2" fill="none"/> </svg> </div> <div class="step-title" style="margin-bottom:16px;">Velg mottaker</div> <div class="step-desc">Registrer ansatte eller venner</div> </div> <div class="step-card"> <div class="step-icon" style="margin-bottom:28px;background:#f8f6f1;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;"> <!-- Gave ikon fra bruker --> <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"> <rect x="6" y="15" width="24" height="15" rx="3" stroke="#d28c77" stroke-width="2.2" fill="none"/> <rect x="16" y="15" width="4" height="15" fill="none" stroke="#d28c77" stroke-width="2.2"/> <rect x="6" y="15" width="24" height="5" fill="none" stroke="#d28c77" stroke-width="2.2"/> <path d="M18 15c-2.5-2.5-7-7-4-9s6.5 3.5 4 9z" fill="none" stroke="#d28c77" stroke-width="2.2"/> <path d="M18 15c2.5-2.5 7-7 4-9s-6.5 3.5-4 9z" fill="none" stroke="#d28c77" stroke-width="2.2"/> </svg> </div> <div class="step-title" style="margin-bottom:16px;">Velg gave</div> <div class="step-desc">Fra v√•rt kurerte utvalg</div> </div> <div class="step-card"> <div class="step-icon" style="padding:0;margin-bottom:28px;background:#f8f6f1;border-radius:50%;width:64px;height:64px;display:flex;align-items:center;justify-content:center;"> <!-- Nytt √•pent hjerte ikon fra bruker --> <svg width="40" height="32" viewBox="0 0 133 107" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M66.5 97C65.1 97 63.8 96.6 62.7 95.7C49.2 84.6 37.2 74.5 28.1 65.2C18.2 55.1 12 45.7 12 36.2C12 18.2 26.7 3.5 44.7 3.5C54.2 3.5 63.1 8.2 68.7 15.7C74.3 8.2 83.2 3.5 92.7 3.5C110.7 3.5 125.4 18.2 125.4 36.2C125.4 45.7 119.2 55.1 109.3 65.2C100.2 74.5 88.2 84.6 74.7 95.7C73.6 96.6 72.3 97 70.9 97H66.5Z" stroke="#d28c77" stroke-width="7" fill="none"/> </svg> </div> <div class="step-title" style="margin-bottom:16px;">Send glede</div> <div class="step-desc">Vi leverer til d√∏ren</div> </div> </div> </section> <section class="holidays-section"> <div class="holidays-title">Vi feirer alle h√∏ytider</div> <div style="height:32px;"></div> <div class="holidays-grid"> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">üåô</div> <div class="holiday-title" style="margin-bottom:12px;">Eid al-Fitr</div> <div class="holiday-desc">Islam</div> </div> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">üéÑ</div> <div class="holiday-title" style="margin-bottom:12px;">Jul</div> <div class="holiday-desc">Kristendom</div> </div> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">ü™î</div> <div class="holiday-title" style="margin-bottom:12px;">Diwali</div> <div class="holiday-desc">Hinduisme</div> </div> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">üïé</div> <div class="holiday-title" style="margin-bottom:12px;">Hanukkah</div> <div class="holiday-desc">J√∏dedom</div> </div> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">üå∏</div> <div class="holiday-title" style="margin-bottom:12px;">Nowruz</div> <div class="holiday-desc">Persisk</div> </div> <div class="holiday-card"> <div class="holiday-icon" style="margin-bottom:20px;">üê£</div> <div class="holiday-title" style="margin-bottom:12px;">P√•ske</div> <div class="holiday-desc">Kristendom</div> </div> </div> </section> <!-- CTA-boks med kun √©n knapp nederst --> <section class="cta-section"> <div style="height:48px;"></div> <div class="cta-box"> <div class="cta-title">Klar til √• skape inkludering?</div> <div class="cta-desc">Bli med tusenvis av bedrifter og privatpersoner som viser omtanke gjennom kulturelt relevante gaver.</div> <div style="display:flex;flex-direction:column;align-items:center;gap:18px;margin-top:32px;"> <button id="open-register-modal" style="background:#e49b7a;color:#fff;font-size:1.15rem;font-weight:700;padding:16px 48px;border:none;border-radius:30px;box-shadow:0 2px 8px rgba(61,92,76,0.10);cursor:pointer;transition:background 0.2s;">Registrer deg n√•</button> </div> </div> </section> <script> function showRegisterModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = ''; document.getElementById('login-form-wrap').style.display = 'none'; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function hideRegisterModal() { document.getElementById('main-content').style.display = ''; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-form-wrap').style.display = ''; document.getElementById('login-form-wrap').style.display = 'none'; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupRegisterModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#open-register-modal').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#open-register-modal').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showRegisterModal(); }; }); // Lukkeknapp og bakgrunn document.getElementById('register-modal-close').onclick = hideRegisterModal; document.getElementById('register-modal-bg').onclick = function(e) { if (e.target === this) hideRegisterModal(); }; document.addEventListener('keydown', function(e) { if (e.key === 'Escape' && document.getElementById('register-modal').style.display === 'flex') hideRegisterModal(); }); } function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Privatperson dashboard funksjoner // Bedrift dashboard funksjoner function hideBedriftDashboard() { document.getElementById('bedrift-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var bedriftLogout = document.getElementById('bedrift-logout'); if (bedriftLogout) { bedriftLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hideBedriftDashboard(); }; } var bedriftSendMelding = document.getElementById('bedrift-send-melding'); if (bedriftSendMelding) { bedriftSendMelding.onclick = function() { var melding = document.getElementById('bedrift-melding').value.trim(); if (!melding) { document.getElementById('bedrift-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('bedrift-melding').value = ''; }; } var bedriftSendGaveonske = document.getElementById('bedrift-send-gaveonske'); if (bedriftSendGaveonske) { bedriftSendGaveonske.onclick = function() { var gaveonske = document.getElementById('bedrift-gaveonske').value.trim(); var hoytid = document.getElementById('bedrift-hoytid').value; if (!gaveonske) { document.getElementById('bedrift-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('bedrift-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('bedrift-gaveonske').value = ''; }; } function hidePrivatpersonDashboard() { document.getElementById('privatperson-dashboard').style.display = 'none'; document.getElementById('main-content').style.display = ''; } var privatpersonLogout = document.getElementById('privatperson-logout'); if (privatpersonLogout) { privatpersonLogout.onclick = function() { loggedInUser = null; localStorage.removeItem('loggedInUser'); hidePrivatpersonDashboard(); }; } var privatpersonSendMelding = document.getElementById('privatperson-send-melding'); if (privatpersonSendMelding) { privatpersonSendMelding.onclick = function() { var melding = document.getElementById('privatperson-melding').value.trim(); if (!melding) { document.getElementById('privatperson-melding-status').textContent = 'Skriv en melding!'; return; } meldinger.push({navn: loggedInUser.navn, epost: loggedInUser.epost, melding, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-melding-status').textContent = 'Melding sendt til administrator!'; document.getElementById('privatperson-melding').value = ''; }; } var privatpersonSendGaveonske = document.getElementById('privatperson-send-gaveonske'); if (privatpersonSendGaveonske) { privatpersonSendGaveonske.onclick = function() { var gaveonske = document.getElementById('privatperson-gaveonske').value.trim(); var hoytid = document.getElementById('privatperson-hoytid').value; if (!gaveonske) { document.getElementById('privatperson-gaveonske-status').textContent = 'Skriv inn et gave√∏nske!'; return; } gaveonsker.push({navn: loggedInUser.navn, epost: loggedInUser.epost, gaveonske, hoytid, tidspunkt: new Date().toLocaleString()}); document.getElementById('privatperson-gaveonske-status').textContent = 'Gave√∏nske sendt!'; document.getElementById('privatperson-gaveonske').value = ''; }; } // Bytt til login-form n√•r "Logg inn" trykkes document.getElementById('login-link').onclick = function(e) { e.preventDefault(); showLoginForm(); }; document.getElementById('back-to-register').onclick = function(e) { e.preventDefault(); showRegisterForm(); }; // Registreringsskjema document.getElementById('register-form').onsubmit = function(e) { e.preventDefault(); // Finn riktig select for rolle let rolleSelect = document.getElementById('reg-rolle'); let rolle = rolleSelect ? rolleSelect.value : ''; // Fallback: pr√∏v √• finne f√∏rste select i skjemaet hvis id mangler if (!rolle && this.querySelector('select')) { rolle = this.querySelector('select').value; } const navn = document.getElementById('reg-navn').value; const epost = document.getElementById('reg-epost').value; const passord = document.getElementById('reg-passord').value; if (!rolle || !navn || !epost || !passord) { alert('Fyll ut alle felter!'); return; } users.push({navn, epost, passord, rolle, kjop: 'Ingen kj√∏p'}); localStorage.setItem('users', JSON.stringify(users)); // Lagre brukere alert('Bruker registrert! Du kan n√• logge inn.'); showLoginForm(); }; // Login-skjema document.getElementById('login-form').onsubmit = function(e) { e.preventDefault(); // Reload users from localStorage in case of updates let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const epost = document.getElementById('login-epost').value; const passord = document.getElementById('login-passord').value; const user = freshUsers.find(u => u.epost === epost && u.passord === passord); if (!user) { alert('Feil e-post eller passord'); return; } loggedInUser = user; localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); restoreLoginAndDashboard(); }; function renderAdminTable(filter = '') { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } const tbody = document.getElementById('admin-users-tbody'); tbody.innerHTML = ''; let filtered = freshUsers.filter(u => u.navn.toLowerCase().includes(filter.toLowerCase()) || u.epost.toLowerCase().includes(filter.toLowerCase()) ); filtered.forEach(u => { const tr = document.createElement('tr'); tr.innerHTML = <td>${u.navn}</td><td>${u.epost}</td><td>${u.rolle}</td><td>${u.kjop}</td>; tbody.appendChild(tr); }); // Oppdater tellinger document.getElementById('admin-usercount').textContent = freshUsers.length; document.getElementById('admin-admincount').textContent = freshUsers.filter(u => u.rolle === 'Administrator').length; document.getElementById('admin-kjopcount').textContent = freshUsers.filter(u => u.kjop && u.kjop !== 'Ingen kj√∏p').length; } // S√∏kefunksjon document.getElementById('admin-search').oninput = function() { renderAdminTable(this.value); }; // Eksport til CSV document.getElementById('admin-export').onclick = function() { // Always use the latest users from localStorage let freshUsers = []; try { freshUsers = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { freshUsers = []; } let csv = 'Navn,E-post,Rolle,Kj√∏p\n'; freshUsers.forEach(u => { csv += ${u.navn},${u.epost},${u.rolle},${u.kjop}\n; }); const blob = new Blob([csv], {type: 'text/csv'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'brukere.csv'; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); }; // Logg ut admin document.getElementById('admin-logout').onclick = function() { loggedInUser = null; hideRegisterModal(); }; // Modal visning og lukking function showLoginModal() { document.getElementById('main-content').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'block'; document.getElementById('register-modal').style.display = 'flex'; document.getElementById('register-form-wrap').style.display = 'none'; document.getElementById('login-form-wrap').style.display = ''; if (document.getElementById('admin-dashboard')) document.getElementById('admin-dashboard').style.display = 'none'; } function setupLoginModalButtons() { // Fjern gamle event listeners document.querySelectorAll('#nav-login').forEach(btn => { btn.replaceWith(btn.cloneNode(true)); }); // Legg til ny event listener document.querySelectorAll('#nav-login').forEach(btn => { btn.onclick = function(e) { e.preventDefault(); showLoginModal(); }; }); } window.onload = function() { setupRegisterModalButtons(); setupLoginModalButtons(); restoreLoginAndDashboard(); }; // Last brukere fra localStorage, eller bruk √©n admin hvis ingen finnes let users = []; try { users = JSON.parse(localStorage.getItem('users')) || []; } catch (e) { users = []; } if (!users.length) { users = [ {navn: 'Kanish', epost: 'kanish.s@outlook.com', passord: 'test', rolle: 'Administrator', kjop: 'Ingen kj√∏p'} ]; localStorage.setItem('users', JSON.stringify(users)); } // Alltid hent loggedInUser fra localStorage p√• hver sidevisning let loggedInUser = null; function restoreLoginAndDashboard() { loggedInUser = JSON.parse(localStorage.getItem('loggedInUser')) || null; if (loggedInUser) { if (loggedInUser.rolle === 'Administrator') { showAdminDashboard(); renderAdminTable(); } else if (loggedInUser.rolle === 'Privatperson') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('privatperson-dashboard').style.display = ''; document.getElementById('privatperson-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('privatperson-status').textContent = 'Du er innlogget som privatperson.'; } else if (loggedInUser.rolle === 'Bedrift') { document.getElementById('register-modal').style.display = 'none'; document.getElementById('register-modal-bg').style.display = 'none'; document.getElementById('main-content').style.display = 'none'; document.getElementById('bedrift-dashboard').style.display = ''; document.getElementById('bedrift-info').textContent = 'Navn: ' + loggedInUser.navn + ' | E-post: ' + loggedInUser.epost; document.getElementById('bedrift-status').textContent = 'Du er innlogget som bedrift.'; } } } } // Dashboard for roller function showDashboardForRole(role, user) { // Remove any existing dashboard document.querySelectorAll('.role-dashboard').forEach(el => el.remove()); let dash = document.createElement('div'); dash.className = 'role-dashboard'; dash.style = 'max-width:700px;margin:40px auto;padding:32px 24px 24px 24px;background:#fff;border-radius:24px;box-shadow:0 4px 24px 0 rgba(61,92,76,0.10);font-size:1.08rem;'; let html = `<div style="font-size:2rem;font-weight:900;color:#3d5c4c;margin-bottom:18px;">Min side ‚Äì ${role}</div>`; html += `<div style="margin-bottom:18px;color:#3d5c4c;">Velkommen, <b>${user.navn||user.epost||''}</b>!</div>`; if (role === 'Administrator' || role === 'Superbruker') { // Whitelist check (replace with your real whitelist) const whitelist = ['kanish.s@outlook.com']; if (!whitelist.includes(user.epost)) { html += '<div style="color:red;">Ingen tilgang: Ikke whitelisted admin.</div>'; dash.innerHTML = html; document.body.appendChild(dash); return; } html += `<ul>
      <li>Full oversikt over brukere, bedrifter og ordrer</li>
      <li>Endre ordrestatus (Planlagt, Pakket, Sendt, Levert)</li>
      <li>Generere rapporter (PDF/CSV)</li>
      <li>Se logistikkoversikt og systemvarsler</li>
      <li>Tilgang kun via whitelist (forh√•ndsdefinerte e-poster)</li>
    </ul>`;
    html += `<button onclick="alert('Endre ordrestatus (demo)')">Endre ordrestatus</button> `;
    html += `<button onclick="alert('Generer rapport (demo)')">Generer rapport</button> `;
    html += `<button onclick="alert('Se logistikk (demo)')">Se logistikk</button>`;
  } else if (role === 'B2B Owner') {
    html += `<ul>
      <li>Registrere bedrift og ansatte (manuelt eller via CSV-import)</li>
      <li>Planlegge og administrere gaver/markeringer</li>
      <li>Se leveringsstatus og rapporter</li>
      <li>Motta p√•minnelser f√∏r h√∏ytider</li>
    </ul>`;
    html += `<button onclick="alert('Registrer bedrift/ansatte (demo)')">Registrer bedrift/ansatte</button> `;
    html += `<button onclick="alert('Administrer gaver (demo)')">Administrer gaver</button>`;
  } else if (role === 'B2B Staff') {
    html += `<ul>
      <li>Opprette og administrere ordrer innenfor bedriftens rammer</li>
      <li>Se logistikkstatus og tilbakemeldinger</li>
      <li>Ikke tilgang til bedriftsinnstillinger</li>
    </ul>`;
    html += `<button onclick="alert('Administrer ordrer (demo)')">Administrer ordrer</button>`;
  } else if (role === 'B2C User' || role === 'Privatperson') {
    html += `<ul>
      <li>Registrere seg, bestille gaver til venner/familie</li>
      <li>Se leveringsstatus og ordrehistorikk</li>
      <li>Gi vurderinger etter levering</li>
    </ul>`;
    html += `<button onclick="alert('Bestill gave (demo)')">Bestill gave</button>`;
  } else if (role === 'Logistics Partner') {
    html += `<ul>
      <li>Se tildelte ordre og oppdatere status (Planlagt ‚Üí Pakket ‚Üí Sendt ‚Üí Levert)</li>
      <li>Laste opp leveringsdokumentasjon (bilde/PDF)</li>
    </ul>`;
    html += `<button onclick="alert('Oppdater ordrestatus (demo)')">Oppdater ordrestatus</button>`;
  } else if (role === 'Support/Service') {
    html += `<ul>
      <li>Finne ordre og brukere for kundest√∏tte</li>
      <li>Skrive interne notater og sende meldinger til kunder</li>
      <li>Eskalere saker til Admin</li>
    </ul>`;
    html += `<button onclick="alert('Finn ordre/bruker (demo)')">Finn ordre/bruker</button>`;
  } else {
    html += `<div>Ingen dashboard for denne rollen.</div>`;
  }
  html += `<button onclick="logoutUser()" style="margin-top:24px;background:#e49b7a;color:#fff;font-weight:700;padding:10px 24px;border:none;border-radius:20px;cursor:pointer;font-size:1.1rem;">Logg ut</button>`;
  dash.innerHTML = html;
  document.body.appendChild(dash);
}
function logoutUser() {
  localStorage.removeItem('loggedInUser');
  document.querySelectorAll('.role-dashboard').forEach(el => el.remove());
  location.reload();
}
</script> </body> </html>